(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(31),s=a.n(c),o=(a(101),a(95)),l=a(64),i=a(21),d=a(22),u=a(27),m=a(23),h=a(20),f=a(28),p=a(35),b=a.n(p),v=Object({NODE_ENV:"production",PUBLIC_URL:"/Accounting-assistant"}).REACT_APP_RECORDS_API_URL||"https://5d0196579ce12c0014e0ed5b.mockapi.io",E=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={edit:!1},e.handleDelete.bind(Object(h.a)(e)),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleToggle",value:function(){this.setState({edit:!this.state.edit})}},{key:"handleEdit",value:function(e){var t=this;e.preventDefault();var a,n,r={date:this.refs.date.value,title:this.refs.title.value,amount:Number.parseInt(this.refs.amount.value,0)};(a=this.props.record.id,n=r,b.a.put("".concat(v,"/api/v1/records/").concat(a),n)).then(function(e){t.props.handleEditRecord(t.props.record,e.data),t.setState({edit:!1})}).catch(function(e){return console.log(e.message)})}},{key:"handleDelete",value:function(e){var t,a=this;e.preventDefault(),(t=this.props.record.id,b.a.delete("".concat(v,"/api/v1/records/").concat(t))).then(function(e){return a.props.handleDeleteRecord(a.props.record)}).catch(function(e){return console.log(e.message)})}},{key:"recordRow",value:function(){var e=this;return r.a.createElement("tr",null,r.a.createElement("td",null,this.props.record.date),r.a.createElement("td",null,this.props.record.title),r.a.createElement("td",null,this.props.record.amount),r.a.createElement("td",null,r.a.createElement("button",{className:"btn",onClick:this.handleToggle.bind(this)},r.a.createElement("i",{className:"fa fa-edit"}),r.a.createElement("span",null)),r.a.createElement("button",{className:"btn",onClick:function(t){window.confirm("Are you sure you wish to delete this item?")&&e.handleDelete(t)}},r.a.createElement("i",{className:"far fa-trash-alt"}),r.a.createElement("span",null))))}},{key:"recordForm",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("input",{type:"text",className:"form-control",defaultValue:this.props.record.date,ref:"date"})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",className:"form-control",defaultValue:this.props.record.title,ref:"title"})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",className:"form-control",defaultValue:this.props.record.amount,ref:"amount"})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn",onClick:this.handleEdit.bind(this)},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement("button",{className:"btn",onClick:this.handleToggle.bind(this)},r.a.createElement("i",{className:"fas fa-times"}))))}},{key:"render",value:function(){return this.state.edit?this.recordForm():this.recordRow()}}]),t}(n.Component),y=a(75),N=a(94),k=a.n(N),g=(a(126),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={date:new Date,title:"",amount:""},a}return Object(f.a)(t,e),Object(d.a)(t,[{key:"handleChange",value:function(e){var t,a;t=e.target.name,this.setState(((a={})[""+t]=e.target.value,a))}},{key:"handleDateChange",value:function(e){this.setState({date:e})}},{key:"valid",value:function(){return this.state.date&&this.state.title&&this.state.amount}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a,n={date:k()(this.state.date).format("DD/MM/YYYY"),title:this.state.title,amount:Number.parseInt(this.state.amount,0)};(a=n,b.a.post("".concat(v,"/api/v1/records"),a)).then(function(e){t.props.handleNewRecord(e.data),t.setState({date:new Date,title:"",amount:""})}).catch(function(e){return console.log(e.message)})}},{key:"render",value:function(){return r.a.createElement("form",{className:"form-inline mb-3",onSubmit:this.handleSubmit.bind(this)},r.a.createElement("div",{className:"form-group mr-1"},r.a.createElement(y.a,{className:"form-control",placeholder:"Date",name:"date",dateFormat:"dd/MM/yyyy",value:this.state.date,selected:this.state.date,onChange:this.handleDateChange.bind(this)})),r.a.createElement("div",{className:"form-group mr-1"},r.a.createElement("input",{type:"text",className:"form-control",onChange:this.handleChange.bind(this),placeholder:"Title",name:"title",value:this.state.title})),r.a.createElement("div",{className:"form-group mr-1"},r.a.createElement("input",{type:"number",inputMode:"numeric",className:"form-control",onChange:this.handleChange.bind(this),placeholder:"Amount",name:"amount",value:this.state.amount})),r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!this.valid()},"Create Record"))}}]),t}(n.Component)),C=function(e){var t=e.text,a=e.type,n=e.amount;return r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header bg-".concat(a," text-white")},t),r.a.createElement("div",{className:"card-body"},n)))},O=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).state={error:null,isLoaded:!1,records:[],isAsc:!0},e.compareBy.bind(Object(h.a)(e)),e.handleSortClick.bind(Object(h.a)(e)),e}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.a.get("".concat(v,"/api/v1/records")).then(function(t){return e.setState({records:t.data,isLoaded:!0})}).catch(function(t){return e.setState({isLoaded:!0,error:t})})}},{key:"addRecord",value:function(e){this.setState({error:null,isLoaded:!0,records:[].concat(Object(l.a)(this.state.records),[e])})}},{key:"updateRecord",value:function(e,t){var a=this.state.records.indexOf(e),n=this.state.records.map(function(e,n){return n!==a?e:Object(o.a)({},e,t)});this.setState({records:n})}},{key:"deleteRecord",value:function(e){var t=this.state.records.indexOf(e),a=this.state.records.filter(function(e,a){return a!==t});this.setState({records:a})}},{key:"credits",value:function(){var e=this.state.records.filter(function(e){return e.amount>=0});return e.reduce(function(e,t){return e+Number.parseInt(t.amount,0)},0)}},{key:"debits",value:function(){return this.state.records.filter(function(e){return e.amount<0}).reduce(function(e,t){return e+Number.parseInt(t.amount,0)},0)}},{key:"balance",value:function(){return this.credits()+this.debits()}},{key:"compareBy",value:function(e,t){return function(a,n){return t?a[e]<n[e]?-1:a[e]>n[e]?1:0:a[e]>n[e]?-1:a[e]<n[e]?1:0}}},{key:"handleSortClick",value:function(e,t){var a=Object(l.a)(this.state.records);a.sort(this.compareBy(e,t)),this.setState({records:a,isAsc:!0!==this.state.isAsc})}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.error,c=a.isLoaded,s=a.records;return e=n?r.a.createElement("div",null,"Error: ",n.message):c?r.a.createElement("table",{className:"table table-striped table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{onClick:function(){return t.handleSortClick("date",t.state.isAsc)}},"Date",r.a.createElement("span",{className:"fas fa-sort Head-sort-margin"})),r.a.createElement("th",{onClick:function(){return t.handleSortClick("title",t.state.isAsc)}},"Title",r.a.createElement("span",{className:"fas fa-sort Head-sort-margin"})),r.a.createElement("th",{onClick:function(){return t.handleSortClick("amount",t.state.isAsc)}},"Amount",r.a.createElement("span",{className:"fas fa-sort Head-sort-margin"})),r.a.createElement("th",null,"Actions"))),r.a.createElement("tbody",null,s.map(function(e){return r.a.createElement(E,{key:e.id,record:e,handleEditRecord:t.updateRecord.bind(t),handleDeleteRecord:t.deleteRecord.bind(t)})}))):r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement("div",{className:"container"},r.a.createElement("h2",{className:"text-center"},"Records"),r.a.createElement("hr",{className:"my-2"}),r.a.createElement("div",{className:"row mb-3"},r.a.createElement(C,{text:"Credit",type:"success",amount:this.credits()}),r.a.createElement(C,{text:"Debit",type:"danger",amount:this.debits()}),r.a.createElement(C,{text:"Balance",type:"info",amount:this.balance()})),r.a.createElement(g,{handleNewRecord:this.addRecord.bind(this)}),e)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,t,a){e.exports=a(127)}},[[96,1,2]]]);
//# sourceMappingURL=main.79875555.chunk.js.map